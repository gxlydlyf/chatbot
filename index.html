<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/css.css" type="text/css" rel="stylesheet">
    <link href="fun/fun.css" type="text/css" rel="stylesheet">
    <style type="text/css">
        .robotBox, .userBox {
            /*behavior: url(ie-css3.htc);*/
        }

    </style>
    <script src="js/html5shiv.min.js"></script>
    <script src="js/jquery2/jquery-1.8.2.js"></script>
    <script src="js/jquery2/jquery-ui.js"></script>
    <script>
        window.jQuery2 = window.$2 = jQuery.noConflict(true);
    </script>
    <script src="js/jquery.min.js"></script>
    <link href="js/jquery2/jquery.ui.all.css" type="text/css" rel="stylesheet">
    <script src="js/debug.js"></script>

    <script src="js/json2.js"></script>
    <!--    <script src="//polyfill.io/v3/polyfill.min.js"></script>&lt;!&ndash;?version=3.111.0&callback=polyfillCallback&ndash;&gt;-->
    <!--    <script src="//cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>-->
    <!--    <script src="//cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>-->
    <script src="js/crypto-js.min.js"></script>
    <script src="js/compatible.js"></script>

    <script src="js/marked/marked.min.js"></script>
    <script src="js/marked/highlight/index.umd.js"></script>
    <script src="js/marked/highlight/highlight.min.js"></script>
    <script src="js/marked/highlight/languages/go.min.js"></script>
    <link href="js/marked/highlight/styles/a11y-dark.min.css" type="text/css" rel="stylesheet">
    <script src="js/marked/linkify/index.umd.js"></script>
    <script>
        var headDom = $('head');
        if (!window.marked || !window.markedHighlight || !window.hljs) {
            headDom.append('<script src="js/showdown/dist/showdown.js"></' + "script>");
            headDom.append('<script src="js/SyntaxHighlighter.load.js"></' + "script>");
            window.marked = {
                marked: function (markdownText) {
                    var conv = new showdown.Converter({metadata: true, converter: true});

                    function escapeReplaceHtml(html) {//转义html为文本
                        var text = document.createTextNode(html);
                        var div = document.createElement('div');
                        div.appendChild(text);
                        return div.innerHTML;
                    }

                    function escapeHtmlTags(text) {
                        return text.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                    }

                    var html = conv.makeHtml(markdownText);
                    html = $(html);

                    html.children('pre code').each(function () {
                        var codeElement = $(this);
                        if (codeElement) {
                            console.log(codeElement);
                            // var HLcontent = SyntaxHighligher.highlight(codeElement.text());
                            // console.log(HLcontent);
                            // console.log(escapeReplaceHtml(codeElement.text()));
                            // codeElement.html(HLcontent);
                        }
                    })
                    return html;
                }
            }
        } else {
            headDom.append('<script src="js/marked/marked.load.js"></' + "script>");
        }
    </script>

    <script src="js/download.compatible.js"></script>
    <script src="js/js.cookie.min.js"></script>
    <script src="js/copy.js"></script>
    <script>
        window.ClipboardJS = window.ClipboardPlugin;
    </script>

    <script src="fun/fun.js"></script>
    <script src="js/storage.js" defer></script>
    <script src="js/setting-config.js" defer></script>
    <!--    <script src="js/save-messages.js" defer></script>-->
    <script src="js/main.js" defer></script>
    <script>
    </script>
    <title>ChatGPT Free</title>
    <!--[if lte IE 8]>
    <style>
        /* 在IE8及以下版本中应用的样式 */
        #chat_messages{
            height: 100%;
            padding-bottom: 30px;
            margin-bottom: 30px;
        }
    </style>
    <![endif]-->
    <!--[if lte IE 7]>
    <style>
        /* 在IE7及以下版本中应用的样式 */
        #textarea_parent {
            border: 2px inset #e5e7eb;
        }

        /*#chat_messages {*/
        /*    height: 300px;*/
        /*}*/

        #send-btn {
            bottom: 1px;
            position: absolute;
            right: 1px;
        }
    </style>
    <![endif]-->
    <!--[if lte IE 6]>
    <style>
        .msgFun span {
            font-size: 16px;
        }

        body {
            text-align: center;
        }

        #tfc_show_btn {
            margin-top: 5px;
        }

        #tfc_buttons .fu-btn {
            margin-top: -5px;
        }
    </style>
    <![endif]-->
</head>
<body>
<h1 style="text-align: center;display: none">AI ChatBot</h1>
<div id="chat_content" class="border-1px">
    <div id="chat_messages">
        <div class="robotBoxContainer msgContainer">
            <div class="msgFun robotFun disable-selection no-scrollbar">
                <span>删除</span><span>复制</span><span>编辑</span><!--<span>停止</span>-->
            </div>
            <div class="robotBox"></div>
        </div>
        <div class="userBoxContainer msgContainer">
            <div class="msgFun userFun disable-selection no-scrollbar">
                <span>删除</span><span>复制</span><span>编辑</span><span>发送</span>
            </div>
            <div class="userBox"></div>
        </div>

    </div>
    <div id="chat_input">
        <div id="textarea_parent">
            <label>
                <textarea id="userInput"></textarea>
            </label>
        </div>

        <img id="send-btn" src="svg/send-btn.svg" onerror="this.src='img/send-btn.png'" alt=""
             class="disable-selection fu-btn">
        <!--        <img id="more-btn" src="svg/outline-more.svg" onerror="this.src='img/outline-more.png'" alt=""-->
        <!--             class="disable-selection fu-btn">-->

    </div>

    <div id="outer_function_container" class="border-1px no-scrollbar">
        <img onclick="SaveMsgObj.clearMessages();SaveMsgConstructor();" alt="" src="svg/delete.svg"
             id="clear-btn"
             style="vertical-align: middle"
             onerror="this.src='img/delete.png'" class="disable-selection fu-btn">
    </div>
    <div id="top_function_container">
        <div id="tfc_buttons" class="no-scrollbar synchronized-vertical-scrolling">

        </div>
        <div id="tfc_show_btn" class="disable-selection">
            <img src="svg/double-alt-arrow-left-line-duotone.svg" alt="" style="height: 20px">
        </div>
    </div>
</div>

<div style="display: none">
    <h3 style="
text-align: center;
line-height: 100%;
">
        <a target="_blank" href="https://github.com/gxlydlyf/chatbot"
           style="text-decoration-line: none;color: black;cursor: pointer" class="jump_to_source"><img
                src="svg/github.svg"
                onerror="this.src='img/github.png'"
                alt=""
                style="
                                                                                                   outline:none;border:none;vertical-align: middle;width: 24px;height: 24px">

            <span style="
text-decoration-line: underline;
text-underline-offset: 4px;
">Repository
    </span></a>

    </h3>
    <div style="text-align: center"><a target="_blank" href="https://icons8.com/icon/4GhGzHg3nZeG/chatgpt">ChatGPT</a>
        icon
        by <a target="_blank"
              href="https://icons8.com">Icons8</a></div>
    <button onclick="downloadFile('./file/stuck.bat')" style="display: block;margin: 20px auto auto auto">点我下载很卡的文件
    </button>
</div>

<script>
    (function () {
        var SVG_NS = 'http://www.w3.org/2000/svg';
        var SVG_T_F = !!document.createElementNS && !!document.createElementNS(SVG_NS, 'svg').createSVGRect;
        console.log('对SVG的兼容性：', SVG_T_F);
        if (!SVG_T_F) {

            for (var i = 0; i < document.images.length; i++) {
                var image = document.images[i];
                var newSrc = (image.src).replace('svg/', 'img/').replace('.svg', '.png')
                // 在这里对每个图像进行操作
                console.log("改变图像URL“" + image.src + "”变为“" + newSrc + "”", image);
                document.images[i].src = newSrc;

            }

        }
    })();


</script>
</body>
</html>